import { useEffect, useRef, useState } from "react";
import "./styles.css";

function generateClassName(number: number) {
  if (number === 1) {
    return "rotate_r1";
  }
  if (number === 2) {
    return "rotate_r2";
  }

  if (number === 3) {
    return "rotate_r3";
  }
  if (number === 4) {
    return "rotate_r4";
  }

  return "";
}

export default function UnfoldCards({
  number = 1,
  runAfterAnimation,
}: {
  number: number;
  runAfterAnimation: () => void;
}) {
  //   const [count, setCount] = useState(0);
  const ref = useRef(null);
  const className = generateClassName(number);
  useEffect(() => {
    if (!ref.current) return;
    const transitionStart = function (_event: TransitionEvent) {
      runAfterAnimation();
    };
    const cardsRing = ref.current as SVGElement;
    cardsRing.addEventListener("transitionstart", transitionStart);

    return () => {
      cardsRing.removeEventListener("transitionstart", transitionStart);
    };
  }, []);

  return (
    <>
      <g className={`unfold_cards ${className}`} ref={ref}>
        <path d="M979.331 1887H1227.33V2135H979.331V1887Z" fill="#826F5E" />
        <path
          d="M1103.33 2097L1082.09 2031.68H1013.33L1068.95 1991.31L1047.71 1926L1103.33 1966.37L1158.95 1926L1137.71 1991.31L1193.33 2031.68H1124.58L1103.33 2097Z"
          fill="#D9D9D9"
        />
        <path
          d="M1137.08 2060.85L1100.64 2028.08L1058.17 2052.57L1078.12 2007.82L1041.68 1975.05L1090.44 1980.17L1110.39 1935.43L1120.58 1983.34L1169.34 1988.46L1126.88 2012.94L1137.08 2060.85Z"
          fill="#D9D9D9"
        />
        <path
          d="M1074.01 2002.71C1074.01 1986.67 1087.03 1973.66 1103.09 1973.66C1119.15 1973.66 1132.17 1986.67 1132.17 2002.71C1132.17 2018.75 1119.15 2031.76 1103.09 2031.76C1087.03 2031.76 1074.01 2018.75 1074.01 2002.71Z"
          fill="#D9D9D9"
        />
        <path d="M979.333 72L1227.33 72V320L979.333 320V72Z" fill="#826F5E" />
        <path
          d="M1103.33 110.999L1124.58 176.316L1193.33 176.316L1137.71 216.683L1158.95 281.999L1103.33 241.632L1047.71 281.999L1068.95 216.683L1013.33 176.316H1082.09L1103.33 110.999Z"
          fill="#D9D9D9"
        />
        <path
          d="M1069.59 147.144L1106.03 179.917L1148.49 155.428L1128.55 200.172L1164.98 232.945L1116.22 227.825L1096.28 272.569L1086.08 224.661L1037.32 219.542L1079.78 195.053L1069.59 147.144Z"
          fill="#D9D9D9"
        />
        <path
          d="M1132.65 205.288C1132.65 221.331 1119.63 234.336 1103.57 234.336C1087.51 234.336 1074.49 221.331 1074.49 205.288C1074.49 189.245 1087.51 176.239 1103.57 176.239C1119.63 176.239 1132.65 189.245 1132.65 205.288Z"
          fill="#D9D9D9"
        />
        <path
          d="M542.485 1664.48L743.121 1810.25L597.35 2010.88L396.714 1865.11L542.485 1664.48Z"
          fill="#826F5E"
        />
        <path
          d="M519.368 1907.25L540.572 1841.92L484.949 1801.51L553.676 1801.55L574.88 1736.22L596.152 1801.57L664.88 1801.61L609.299 1841.96L630.572 1907.31L574.949 1866.9L519.368 1907.25Z"
          fill="#D9D9D9"
        />
        <path
          d="M567.913 1897.85L557.697 1849.91L508.949 1844.77L551.383 1820.29L541.168 1772.36L577.609 1805.16L620.044 1780.69L600.132 1825.44L636.573 1858.24L587.825 1853.1L567.913 1897.85Z"
          fill="#D9D9D9"
        />
        <path
          d="M551.07 1813.74C560.5 1800.76 578.677 1797.89 591.671 1807.33C604.664 1816.77 607.553 1834.95 598.123 1847.93C588.694 1860.91 570.516 1863.77 557.522 1854.33C544.529 1844.89 541.64 1826.72 551.07 1813.74Z"
          fill="#D9D9D9"
        />
        <path
          d="M1609.31 196.113L1809.95 341.883L1664.18 542.519L1463.54 396.749L1609.31 196.113Z"
          fill="#826F5E"
        />
        <path
          d="M1686.71 300.548L1665.51 365.878L1721.13 406.291L1652.4 406.255L1631.2 471.585L1609.92 406.232L1541.2 406.196L1596.78 365.842L1575.51 300.49L1631.13 340.902L1686.71 300.548Z"
          fill="#D9D9D9"
        />
        <path
          d="M1638.16 309.956L1648.38 357.888L1697.13 363.035L1654.69 387.511L1664.91 435.443L1628.47 402.639L1586.03 427.115L1605.95 382.364L1569.5 349.559L1618.25 354.707L1638.16 309.956Z"
          fill="#D9D9D9"
        />
        <path
          d="M1655.01 394.062C1645.58 407.042 1627.4 409.91 1614.41 400.47C1601.41 391.03 1598.52 372.855 1607.95 359.876C1617.38 346.897 1635.56 344.028 1648.55 353.469C1661.55 362.909 1664.44 381.083 1655.01 394.062Z"
          fill="#D9D9D9"
        />
        <path
          d="M319.863 1227.68L396.499 1463.54L160.637 1540.18L84.0009 1304.32L319.863 1227.68Z"
          fill="#826F5E"
        />
        <path
          d="M158.459 1410.5L214.013 1370.11L192.767 1304.73L248.348 1345.15L303.902 1304.76L282.698 1370.14L338.279 1410.56L269.594 1410.54L248.39 1475.92L227.144 1410.53L158.459 1410.5Z"
          fill="#D9D9D9"
        />
        <path
          d="M203.263 1431.43L223.172 1386.65L186.759 1353.83L235.476 1358.97L255.385 1314.19L265.585 1362.15L314.302 1367.29L271.889 1391.79L282.088 1439.75L245.676 1406.93L203.263 1431.43Z"
          fill="#D9D9D9"
        />
        <path
          d="M239.073 1353.48C254.331 1348.53 270.723 1356.89 275.686 1372.16C280.649 1387.44 272.304 1403.84 257.046 1408.8C241.788 1413.76 225.396 1405.39 220.433 1390.12C215.47 1374.84 223.815 1358.44 239.073 1353.48Z"
          fill="#D9D9D9"
        />
        <path
          d="M2046.03 666.816L2122.67 902.678L1886.8 979.315L1810.17 743.453L2046.03 666.816Z"
          fill="#826F5E"
        />
        <path
          d="M2047.26 796.798L1991.7 837.188L2012.95 902.576L1957.37 862.15L1901.81 902.54L1923.02 837.165L1867.44 796.739L1936.12 796.761L1957.32 731.386L1978.57 796.775L2047.26 796.798Z"
          fill="#D9D9D9"
        />
        <path
          d="M2002.45 775.875L1982.54 820.657L2018.96 853.475L1970.24 848.334L1950.33 893.117L1940.13 845.157L1891.41 840.016L1933.83 815.516L1923.63 767.557L1960.04 800.375L2002.45 775.875Z"
          fill="#D9D9D9"
        />
        <path
          d="M1966.64 853.818C1951.38 858.776 1934.99 850.412 1930.03 835.137C1925.07 819.863 1933.41 803.461 1948.67 798.504C1963.93 793.546 1980.32 801.91 1985.28 817.185C1990.25 832.459 1981.9 848.861 1966.64 853.818Z"
          fill="#D9D9D9"
        />
        <path
          d="M396.498 743.449L319.862 979.311L84 902.674L160.636 666.812L396.498 743.449Z"
          fill="#826F5E"
        />
        <path
          d="M158.458 796.486L227.143 796.464L248.389 731.075L269.593 796.45L338.277 796.428L282.697 836.854L303.9 902.229L248.346 861.839L192.766 902.265L214.012 836.876L158.458 796.486Z"
          fill="#D9D9D9"
        />
        <path
          d="M182.407 839.748L224.836 815.221L214.667 767.268L251.058 800.062L293.487 775.534L273.549 820.329L309.941 853.123L261.227 848.015L241.289 892.81L231.12 844.857L182.407 839.748Z"
          fill="#D9D9D9"
        />
        <path
          d="M257.192 797.739C272.45 802.697 280.795 819.098 275.832 834.373C270.869 849.648 254.477 858.011 239.219 853.054C223.961 848.096 215.616 831.695 220.579 816.42C225.542 801.145 241.934 792.781 257.192 797.739Z"
          fill="#D9D9D9"
        />
        <path
          d="M2122.66 1304.32L2046.03 1540.18L1810.16 1463.54L1886.8 1227.68L2122.66 1304.32Z"
          fill="#826F5E"
        />
        <path
          d="M2047.25 1410.19L1978.57 1410.22L1957.32 1475.6L1936.12 1410.23L1867.44 1410.25L1923.02 1369.83L1901.81 1304.45L1957.37 1344.84L2012.95 1304.41L1991.7 1369.8L2047.25 1410.19Z"
          fill="#D9D9D9"
        />
        <path
          d="M2023.31 1366.93L1980.88 1391.46L1991.05 1439.41L1954.65 1406.62L1912.23 1431.15L1932.16 1386.35L1895.77 1353.56L1944.49 1358.67L1964.42 1313.87L1974.59 1361.82L2023.31 1366.93Z"
          fill="#D9D9D9"
        />
        <path
          d="M1948.52 1408.94C1933.26 1403.98 1924.92 1387.58 1929.88 1372.31C1934.84 1357.03 1951.24 1348.67 1966.49 1353.63C1981.75 1358.58 1990.1 1374.99 1985.13 1390.26C1980.17 1405.53 1963.78 1413.9 1948.52 1408.94Z"
          fill="#D9D9D9"
        />
        <path
          d="M743.121 396.745L542.485 542.516L396.714 341.88L597.35 196.109L743.121 396.745Z"
          fill="#826F5E"
        />
        <path
          d="M519.368 299.737L574.948 340.091L630.571 299.678L609.299 365.031L664.879 405.385L596.152 405.421L574.879 470.773L553.676 405.443L484.948 405.48L540.571 365.067L519.368 299.737Z"
          fill="#D9D9D9"
        />
        <path
          d="M513.314 348.813L562.057 353.909L582.016 309.138L592.181 357.059L640.924 362.154L598.464 386.675L608.629 434.597L572.222 401.83L529.762 426.351L549.721 381.58L513.314 348.813Z"
          fill="#D9D9D9"
        />
        <path
          d="M598.509 358.785C607.939 371.764 605.05 389.938 592.056 399.379C579.063 408.819 560.885 405.95 551.455 392.971C542.025 379.992 544.914 361.818 557.908 352.377C570.901 342.937 589.079 345.806 598.509 358.785Z"
          fill="#D9D9D9"
        />
        <path
          d="M1809.95 1865.11L1609.31 2010.88L1463.54 1810.24L1664.18 1664.47L1809.95 1865.11Z"
          fill="#826F5E"
        />
        <path
          d="M1686.71 1906.44L1631.13 1866.09L1575.5 1906.5L1596.78 1841.15L1541.2 1800.8L1609.92 1800.76L1631.2 1735.41L1652.4 1800.74L1721.13 1800.7L1665.5 1841.11L1686.71 1906.44Z"
          fill="#D9D9D9"
        />
        <path
          d="M1692.76 1857.37L1644.02 1852.27L1624.06 1897.04L1613.89 1849.12L1565.15 1844.03L1607.61 1819.51L1597.45 1771.58L1633.85 1804.35L1676.31 1779.83L1656.35 1824.6L1692.76 1857.37Z"
          fill="#D9D9D9"
        />
        <path
          d="M1607.57 1847.4C1598.14 1834.42 1601.03 1816.24 1614.02 1806.8C1627.01 1797.36 1645.19 1800.23 1654.62 1813.21C1664.05 1826.19 1661.16 1844.36 1648.17 1853.8C1635.17 1863.24 1617 1860.37 1607.57 1847.4Z"
          fill="#D9D9D9"
        />
      </g>
    </>
  );
}
